{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst URL =\"https://pixabay.com/api\";\nconst API_KEY = \"42149629-e1e8d2a9238f015bc3d9ce966\";\n\nconst refs = {\n    form: document.getElementById(\"form\"),\n    resultContainer: document.getElementById(\"result-container\"),\n    loadingIndicator: document.querySelector(\".loader\")\n};\n\nrefs.form.addEventListener(\"submit\", handleSearch);  //лісенер на форму\n\nfunction clearResultContainer() {\n    refs.resultContainer.innerHTML = \"\";//div\n}\n\nfunction showLoadingIndicator() {\n    refs.loadingIndicator.style.display = \"block\";//on lo\n}\n\nfunction hideLoadingIndicator() {\n    refs.loadingIndicator.style.display = \"none\";//off lo\n}\n\n\nfunction handleSearch(event) {  // отримуємо дані з інпуту\n    event.preventDefault();\n    const form = event.currentTarget;\n    const requestForSearch = form.elements.search.value;\n\n    clearResultContainer();\n    showLoadingIndicator();//\n\n\n    if (requestForSearch.trim().length === 0){\n            iziToast.show({\n                message: \"Please, try again!\",\n                color: \"red\"\n            });\n            hideLoadingIndicator(); //крутялка\n            return;\n        }\n    clearResultContainer();// контейнер\n    showLoadingIndicator()// крутялка\n\n\n    searchPictures(requestForSearch).then((data) =>{\n\n        const pictures = data.hits;\n\n        if (pictures.length === 0) {\n            iziToast.show({\n                message: \"Sorry, there are no images matching your search query. Please try again!\"\n            });\n        } else {\n            let markup = \"\"\n            for (const pic of pictures) {\n                markup +=createPicturesMarkup(pic);\n            }    \n        refs.resultContainer.innerHTML = markup;\n        }\n    })\n    .catch(error => {\n        console.error('Error:', error);\n    })\n    .finally(() => {\n        hideLoadingIndicator(); //крутялка\n        form.reset();\n        \n    });\n}\n\n\nfunction searchPictures(requestForSearch) {\n    return fetch(`${URL}/?key=${API_KEY}&q=${requestForSearch}&image_type=photo&orientation=horizontal&safesearch=true&per_page=12`).then(\n        (res) => {\n            if (!res.ok){\n                throw new Error(`Network response was not ok: ${res.statusText}`);\n            }\n            return res.json();\n        }\n    );\n}\n\n\nfunction createPicturesMarkup({likes, views, comments, downloads, tags, webformatURL, largeImageURL}) {\n    return `<li class=\"image-container\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n         <img\n           class=\"gallery-image\"\n           src=\"${webformatURL}\"\n           alt=\"${tags}\"\n         />\n        </a>\n        <div class=\"overlay\">\n        <p>likes<br>${likes}</p>\n        <p>views<br>${views}</p>\n        <p>comments<br>${comments}</p>\n        <p>downloads<br>${downloads}</p></div>\n    </li>\n`\n}\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {  \n    captionsData: \"alt\", \n    captionDelay: 250,\n  });"],"names":["URL","API_KEY","refs","handleSearch","clearResultContainer","showLoadingIndicator","hideLoadingIndicator","event","form","requestForSearch","iziToast","searchPictures","data","pictures","markup","pic","createPicturesMarkup","error","res","likes","views","comments","downloads","tags","webformatURL","largeImageURL","SimpleLightbox"],"mappings":"6vBAKA,MAAMA,EAAK,0BACLC,EAAU,qCAEVC,EAAO,CACT,KAAM,SAAS,eAAe,MAAM,EACpC,gBAAiB,SAAS,eAAe,kBAAkB,EAC3D,iBAAkB,SAAS,cAAc,SAAS,CACtD,EAEAA,EAAK,KAAK,iBAAiB,SAAUC,CAAY,EAEjD,SAASC,GAAuB,CAC5BF,EAAK,gBAAgB,UAAY,EACrC,CAEA,SAASG,GAAuB,CAC5BH,EAAK,iBAAiB,MAAM,QAAU,OAC1C,CAEA,SAASI,GAAuB,CAC5BJ,EAAK,iBAAiB,MAAM,QAAU,MAC1C,CAGA,SAASC,EAAaI,EAAO,CACzBA,EAAM,eAAc,EACpB,MAAMC,EAAOD,EAAM,cACbE,EAAmBD,EAAK,SAAS,OAAO,MAM9C,GAJAJ,IACAC,IAGII,EAAiB,OAAO,SAAW,EAAE,CACjCC,EAAS,KAAK,CACV,QAAS,qBACT,MAAO,KACvB,CAAa,EACDJ,IACA,MACH,CACLF,IACAC,EAAsB,EAGtBM,EAAeF,CAAgB,EAAE,KAAMG,GAAQ,CAE3C,MAAMC,EAAWD,EAAK,KAEtB,GAAIC,EAAS,SAAW,EACpBH,EAAS,KAAK,CACV,QAAS,0EACzB,CAAa,MACE,CACH,IAAII,EAAS,GACb,UAAWC,KAAOF,EACdC,GAASE,EAAqBD,CAAG,EAEzCb,EAAK,gBAAgB,UAAYY,CAChC,CACT,CAAK,EACA,MAAMG,GAAS,CACZ,QAAQ,MAAM,SAAUA,CAAK,CACrC,CAAK,EACA,QAAQ,IAAM,CACXX,IACAE,EAAK,MAAK,CAElB,CAAK,CACL,CAGA,SAASG,EAAeF,EAAkB,CACtC,OAAO,MAAM,GAAGT,UAAYC,OAAaQ,uEAAsF,EAAE,KAC5HS,GAAQ,CACL,GAAI,CAACA,EAAI,GACL,MAAM,IAAI,MAAM,gCAAgCA,EAAI,YAAY,EAEpE,OAAOA,EAAI,MACd,CACT,CACA,CAGA,SAASF,EAAqB,CAAC,MAAAG,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,KAAAC,EAAM,aAAAC,EAAc,cAAAC,CAAa,EAAG,CAClG,MAAO;AAAA,wCAC6BA;AAAA;AAAA;AAAA,kBAGtBD;AAAA,kBACAD;AAAA;AAAA;AAAA;AAAA,sBAIIJ;AAAA,sBACAC;AAAA,yBACGC;AAAA,0BACCC;AAAA;AAAA,CAG1B,CAEiB,IAAII,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GACf,CAAA"}